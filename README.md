Ткаченко Александр Александрович

Билд игры лежит по ссылке https://disk.yandex.ru/d/VNpgG96j96bhJQ Небольшое видео по прохождению игры лежит по ссылке https://disk.yandex.ru/i/9q_-3KaDIEpZpQ

Пока игра похожа на песочницу или обучающий уровень.

Управление :

перемещение W A S D или стрелки; 
прыжок - пробел; 
забрать предмет - E; 
бросок гранаты - G; 
выбор оружия - цифры сверху:
1 - дробовик, 2 - автомат,
3 - кумулятивная граната, 4 - простая граната.
Оружие можно менять и кликая по стрелочкам на панелях справа внизу. Там отображается название и количество выбранного.
СТРЕЛЬБА - левая кнопка мыши, для очередей из автомата нужно её нажать и удерживать; 
Приближение и удаление камеры колёсиком мыши; 
Поворот персонажа автоматически выполняется в сторону движения. Для поворота на месте в сторону курсора нажмите и удерживайте правую кнопку мыши и двигайте курсор мыши куда надо.


Успел реализовать:

Управление, воспроизведение звуков, спецэффеекты в соответствии с ТЗ. Вместо стола с оружием по уровню размещены "бонусы": оружие, гранаты, микстура и ключ, которые можно собрать в инвентарь. 2 бочки и топливный бак танка можно поджечь "попаданием" пуль или взрывом гранаты рядом. Кумулятивная граната взрывом отбрасывает башню танка. Любая граната при взрыве рядом с коричневым кубом приводит к его "разрушению" - он распадается на кубы поменьше, которые потом исчезают. Выстрелы в точке попадания оставляют следы в виде черных кружков на 10 секунд (на поверхности коллайдера). В момент выстрела в месте "вылета пули" горит огонь из системы частиц с учётом одиночных и очередей. В точке попадания воспроизводится эффект осыпания осколков. В месте взрыва гранаты воспроизводится эффект разлёта осколков побольше. На уровне есть 2 "прозрачных" шара - уничтожаемые объекты. Их можно расстрелять из оружия. Они исчезнут при "попадании пули", а на их месте появляется бонусный предмет (микстура или ключ или любой другой, выставленный в соответствующее поле в инспекторе). Справа сверху есть имитация выхода из уровня. Без ключа выводится подсказка. С ключом персонаж входит в прозрачную область - поднимается дверь, входит в дверной проём - показывается панель окончания уровня. Некоторые бонусы расположены над кубами, на которые надо взобраться прыжками (синие) или забежать по наклону (красные). Справа внизу расположены 2 панели "инвентаря", отображающие выбранные типы оружия и гранат. Кликами по стрелкам выбранные типы меняются. При подборе предметов их счётчики увеличиваются (если эти типы выбраны, то это видно на панелях). При бросках гранат их число уменьшается (видно на панели). У персонажа есть подсумок с гранатами на поясе справа. Там ячейки для двух гранат. Увидеть непросто, но при смене типа, подборе и расходе меняется содержимое подсумка. При броске гранаты: оружие переходит из руки в руку (в конце возвращается обратно), потом в руке появляется выбранная ранее граната, рука двигает её по дуге и "отпускает" - граната летит вперёд под углом 45 градусов. Префабы оружия, аммуниции и гранат прикреплены к соответствующим костям скелета. Их положение настроено относительно кости. У некоторых костей может быть несколько предметов. Активен один, переключение по командам из скрипта. 

Как я понял, ТЗ было сконцентрировано на реализации технических моментов жанра "шутер". Всё время ушло на их реализацию. И сценария как такового нет.

Звуки из бесплатных ассетов. На сцене всё из примитивов, кроме 3Д моделей вооружения, которые мной сделаны в Blender. ЗД модель персонажа с анимациями тоже моё "творчество" (Blender + Mixamo).

Структура проекта в Unity из папок по типам ассетов. Для скриптов и префабов внутри папки по группам исходя из их назначения.

Описание скриптов:

персонаж:
-  IsoCameraFollower - камера следит за персонажем под углом 45 градусов, расстояние можно менять от мин до макс колесом мыши;
-  PlayerMovement - управление перемещением персонажа, включение/выключение анимаций, обработка ввода играющего
-  PlayerShooting - стрельба "пулями" (здесь не используется)
-  GunShooting - имитация стрельбы одиночными и очередями (4 раза в секунду) с помощью бросания лучей с воспроизведением звуков и спецэффектов при попадании
-  TossGranade - имитация броска гранаты, выполнение действий по включению/выключению предметов в руках в соответствии с анимацией, спецэффекты огня выстрела (вкл/выкл тут потому что управление показом оружия в руках тут)
-  PouchGranadeControl - управление показом гранат в подсумке в зависимости от их выбора и количества
-  PlayerControl - содержит экземпляр класса инвентаря, обрабатывает выбор типа вооружения персонажа, подбор и расход предметов инвентаря, вызывает функции отображения данных в пользовательском интерфейсе; здесь же можно реализовать изменение здоровья, опыта, денег, энергии персонажа с вызовом функций отображения текущих значений в UI. 

уровень:
-  LevelControl - отслеживает наличие ключа (возможность завершить прохождение уровня в данном случае), вызывает функции отображения в UI панели подсказки и панели конца уровня;
-  ExitLevel - отслеживание входа персонажа в дверной проём, подъём двери;
-  DoorTrigger - отслеживание входа/выхода персонажа в прозрачную область около двери, управление вкл/выкл подсказки при отстствии ключа;
-  UI_Control - вывод различных данных в элементы UI, вкл/выкл панелей, перезапуск игры

снаряды (Bullet):
-  GranadeControl - запуск гранаты в полёт, взаимодействие с предметами в радиусе падения гранаты, запуск звука и эффекта взрыва при попадании во что-то
-  BulletControl - (не используется) обработка попадания "снарядов" с нанесением урона
-  ArmFire - управление огнём из дула оружия (вкл/выкл соответствующего эффекта PS)

противники (Enemy):
-  TankControl - управление эффектами танка: отлёт башни, поджёг топливного бака;
-  OilBarel - управление поджёгом бочек с горючим;
-  interface IFireBarel - две функции для двух вариантов поджога (от попадания пули и взрыва гранаты рядом), реализованы в 2 классах выше, вызываюся функции в GranadeControl и GunShooting;

инвентарь:
-  InventoryItem : ScriptableObject - описание предметов инвентаря (название, тип, sprite, очки эффекта, цена) каждый в своём классе;
-  InventoryUnit - единица инвентаря, включает в себя InventoryItem, число таких предметов  в инвентаре, поддержку функций инвентаря;
-  InventoryObject - предмет, который можно взять в инвентарь, вращение его для заметности, обработку входа/выхода персонажа в зону триггера предмета с вызовом функции соответствующей подсказки;
-  HullControl - показ внутреннего предмета InventoryObject после разрушения сферы-оболочки;
-  DisableFocusOnPointerLeave - запрет нажатия кнопки по пробелу или Enter при выходе курсора из фокуса кнопки (для стрелок в панелях инвентаря снизу);
-  Inventory - массив предметов InventoryUnit и работа с ними: добавление, расходование, проверка наличия, получение информации для отображения, получение массив предметов задаваемых типов.

P.S. Как обычно не хватило времени на более качественный рефакторинг, более логичное переупорядочивание классов по группам и разделение некоторых относительно перегруженных классов на более простые.
